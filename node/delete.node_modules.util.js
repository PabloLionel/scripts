const fs = require('fs');
const path = require('path');

function eliminarDirectoriosPorNombre(directoryName) {
    return function eliminarDirectorio(dir) {
        // Lee el contenido del directorio
        fs.readdir(dir, (err, files) => {
            if (err) {
                console.error(`Error al leer el directorio ${dir}: ${err}`);
                return;
            }
    
            // Recorre los archivos y directorios
            files.forEach(file => {
                if ([
                    'automove-mouse',
                    'ly-form',
                    'trew-app',
                    'ts-playground',
                    'typeorm-with-sqlite',
                    'supervielle'
                ].includes(file)) {
                    return;
                }
    
                const filePath = path.join(dir, file);
    
                // Si es un directorio, llama recursivamente a la funci√≥n
                if (fs.statSync(filePath).isDirectory()) {
                    if (file === directoryName) {
                        console.log(`Eliminando la carpeta ${filePath}...`);
    
                        fs.rmdirSync(`./${filePath}`, { recursive: true, force: true });
                    } else {
                        eliminarDirectoriosPorNombre(directoryName)(filePath);
                    }
                }
            });
        });
    }
}



// Directorio inicial
const directorioInicial = '.';

// const eliminarNodeModules = eliminarDirectoriosPorNombre('node_modules');
const eliminarAngularFolders = eliminarDirectoriosPorNombre('.angular');

// eliminarNodeModules(directorioInicial);
eliminarAngularFolders(directorioInicial);
